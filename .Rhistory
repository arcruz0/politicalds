library(devtools)
library(roxygen2)
library(tidyverse)
data_package <- list.files("C:\Users\tatan\OneDrive\Escritorio\Vicho\Clean data\00-data")
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data")
View(data_package)
map(
.x = data_package,
.f = use_data(x)
)
map(
.x = data_package,
.f = ~ use_data(.x)
)
overwrite = TRUE
map(
.x = data_package,
.f = ~ use_data(.x)
)
dataframes <- map_dfr(
.x = data_package,
.f = ~ load(.x)
)
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/", full.names = T)
data_list <- map(
.x = data_package,
.f = ~ load()
)
data_list <- map(
.x = data_package,
.f = ~ load(.x)
)
View(data_list)
map(
.x = data_list,
.f = ~ use_data(.x)
)
overwrite = TRUE
map(
.x = data_list,
.f = ~ use_data(.x), overwrite = TRUE
)
map(
.x = data_list,
.f = ~ use_data(.x), overwrite = TRUE)
map(
.x = data_package,
.f = ~ use_data(.x), overwrite = TRUE)
map(
.x = data_package,
.f = ~ load(.x)
)
map(
.x = data_package,
.f = ~ use_data(.x)
)
TRUE
data_package
map(
.x = data_package,
.f = ~ use_data(.x)
)
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Paquetes R/politicalds/data/.x.rda")
data_names <- map_dfr(
.x = data_package,
.f = ~ load(.x)
)
data_names <- map_dfr(
.x = data_package,
.f = ~ load(.x))
rm(data_list)
rm(data_package)
rm(overwrite)
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/", full.names = T)
data_names <- map_dfr(
.x = data_package,
.f = ~ load(.x))
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/municipal_data.RData")
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data", full.names = T)
data_names <- map_dfr(
.x = data_package,
.f = ~ load(.x))
rlang::last_error()
View(municipal_data)
data_names <- map(
.x = data_package,
.f = ~ load(.x))
View(data_names)
map(
.x = data_names,
.f = ~ use_data(.x)
)
map(
.x = data_names$Value,
.f = ~ use_data(.x)
)
names(data_names)
names(data_package)
deparse(substitute(municipal_data))
deparse(substitute(data_package))
deparse(substitute(data_names))
a <- ls.str(mode = "list")
temp = list.files(pattern ="*/Clean data/*.RData")
temp = list.files(pattern ="C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/*.RData")
myfiles = lapply(temp, read.delim)
temp = list.files(pattern ="C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/")
temp = list.files(pattern ="C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data")
rm(temp)
temp = list.files(pattern ="C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data")
myfiles = lapply(data_package, read.delim)
data_names1 <- data_package
data_names1 = data_package
data_package
data_names1 = lapply(data_package)
data_names1 = lapply(data_package, read_delim)
data_names1 = lapply(data_package, load)
View(data_names1)
?read_delim
?load
data_names
data_names$Value
data_names$[[1]]
data_names[[1]]
data_names[[2]]
data_names[[3]]
map(
.x = data_names[[.x]],
.f = ~ use_data(.x)
)
F <- map(
.x = data_names[[.x]],
.f = ~ use_data(.x)
)
DATA <- lapply(data_names, load, .GlobalEnv)
file_names = as.list(dir(path = "C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/", pattern = "*.RData"))
View(file_names)
View(data_names)
View(file_names)
View(file_names)
rm(municipal_data)
file_names = as.list(dir(path = "C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/", pattern = "*.RData"))
file_names = lapply(file_names, function(x) paste0("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/", x))
View(file_names)
file_names = as.list(dir(path = "C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/", pattern = "*.RData"))
View(`F`)
View(file_names)
objname = gsub(pattern = '*.RData', replacement = '', x = objname)
objname = gsub(pattern = '*.RData', replacement = '', x = file_names)
out = lapply(file_names,function(x){
env = new.env()
nm = load(x, envir = env)[1]
objname = gsub(pattern = "C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/", replacement = '', x = x, fixed = T)
objname = gsub(pattern = '*.RData', replacement = '', x = file_names)
# print(str(env[[nm]]))
assign(objname, env[[nm]], envir = .GlobalEnv)
0 # succeeded
} )
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/*.RData", ex <- new.env())
ls.str(ex)
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data", full.names = T)
View(data_package)
class(data_package)
type(data_package)
map(
.x = data_package,
.f = ~ load(.x))
library(devtools)
library(roxygen2)
library(tidyverse)
map(
.x = data_package,
.f = ~ load(.x))
data.frame(data_package)
data_names _ data.frame(data_package)
data_names <- data.frame(data_package)
View(data_names)
map(
.x = data_names,
.f = ~ load(.x))
View(data_names)
?lapply
lapply(data_names, load, .GlobalEnv)
lapply(data_names, load, .GlobalEnv)
lapply(data_package, load, .GlobalEnv)
rm(data_names)
map(
.x = .GlobalEnv,
.f = ~ use_data(.x)
)
lapply(.GlobalEnv, use_data)
lapply(data_package, use_data)
LIST <- lapply(setNames(ls(), ls()))
setNames(ls())
?setNames
setNames(ls(), ls())
lapply(setNames(ls(), ls()), function(i){
x = get(i)
if(is.rds(x)) {
use_data(x)
}
})
use_data(x)
setNames(ls(), ls())
DF <- setNames(ls(), ls())
DF <- data.frame(setNames(ls(), ls()))
View(DF)
map(
.x = DF,
.f = ~ use_data(.x))
walk2(data_package, names(data_package), function(data_package, name) {
assign(data_package, new_data_package)
do.call("use_data", list(as.name(name), overwrite = TRUE))
})
names(data_package)
names(data_package)
View(data_package)
DF
?walk2
assign(data_package)
?assign
assign("Global.res", load, envir = .GlobalEnv)
View(Global.res)
rm(Global.res)
rm(DF)
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data", full.names = T)
lapply(data_package, load, .GlobalEnv)
names(data_package)
names(data_package[1])
names(data_package[[1]])
View(data_package)
get(data_package)
get(.GlobalEnv)
get(data_package)
names(americas_gdp_pc)
names(globalenv())
get(globalenv())
get(names(globalenv()))
names(globalenv())
data.frame(names(globalenv()))
data <- data.frame(names(globalenv()))
View(data)
get(data)
get(data_package)
get(data)
get(americas_gdp_pc)
?get
mget(data_package)
mget(data)
data1 <- data.frame(names(globalenv()))
mget(data1)
get(data_package, pos = 3, envir = as.environment())
results = lapply(setNames(ls(), ls()), function(i) {
x = get(i)
if(is.environment(x)) {
print(1)
}
})
results = results[!sapply(results, is.null)]
View(results)
print(x)
print(1)
print(2)
results = lapply(setNames(ls(), ls()), function(i) {
x = get(i)
if(is.environment(x)) {
print(2)
}
})
View(results)
use_data(x)
results = lapply(setNames(ls(), ls()), function(i) {
x = get(i)
if(is.environment(x)) {
use_data(x)
}
})
View(results)
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data", full.names = T)
lapply(data_package, load, .GlobalEnv)
?globalenv
?is.enviorment
?is.enviorment()
??is.enviorment()
?is.enviroment()
?is.enviroment()
?is.enviroment
??is.enviroment
?is.environment
use_data(americas_gdp_pc)
use_data(cinc_index)
use_data(cosponsorship_arg)
use_data(direct_democracy)
use_data(edu_age)
use_data(lapop)
use_data(messy_summary)
use_data(municipal_data)
use_data(treaties)
use_data(us_brazil)
use_data(us_latam)
use_data(welfare)
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/mosquito_nets.RData")
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/mosquito_nets.RData")
View(direct_democracy)
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/mosquito_nets.RData")
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data", full.names = T)
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data", full.names = T)
lapply(data_package, load, .GlobalEnv)
View(data_package)
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/mosquito_nets.RData")
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data/mosquito_nets.RData")
View(direct_democracy)
load("C:/Users/tatan/OneDrive/Escritorio/Vicho/Rawish data/mosquito_nets.rda")
View(mosquito_nets)
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data", full.names = T)
lapply(data_package, load, .GlobalEnv)
View(mosquito_nets)
use_data(americas_gdp_pc)
use_data(approval)
use_data(approval_wide1)
use_data(approval_wide2)
use_data(cinc_index)
use_data(cosponsorship_arg)
use_data(direct_democracy)
use_data(edu_age)
use_data(lapop)
use_data(messy_summary)
use_data(mosquito_nets)
use_data(municipal_data)
use_data(senators_arg)
use_data(treaties)
use_data(us_brazil)
use_data(us_latam)
use_data(welfare)
library(devtools)
library(roxygen2)
library(tidyverse)
data_package <- list.files("C:/Users/tatan/OneDrive/Escritorio/Vicho/Clean data/00-data", full.names = T)
View(data_package)
lapply(data_package, load, .GlobalEnv)
use_data(americas_gdp_pc)
use_data(approval)
use_data(approval_wide1)
use_data(approval_wide2)
use_data(cinc_index)
use_data(cosponsorship_arg)
use_data(dem_breakdown)
use_data(direct_democracy)
use_data(edu_age)
use_data(lapop)
use_data(messy_summary)
use_data(mosquito_nets)
use_data(municipal_data)
use_data(senators_arg)
use_data(treaties)
use_data(us_brazil)
use_data(us_latam)
use_data(welfare)
devtools::document()
View(us_brazil)
View(us_latam)
data_package <- list.files("C:\Users\vicen\Dropbox\Proyecto de libro\libroadp_crc\00-data-package", full.names = T)
data_package <- list.files("C:/Users/vicen/Dropbox/Proyecto de libro/libroadp_crc/00-data-package", full.names = T)
View(data_package)
lapply(data_package, load, .GlobalEnv)
use_data(poltweets)
install.packages("devtools")
library(devtools)
library(roxygen2)
use_data(poltweets)
devtools:document()
devtools::document()
data_package <- list.files("C:\Users\vicen\Dropbox\Proyecto de libro\paquete_r\politicalds",
full.names = T)
library(devtools)
library(roxygen2)
library(tidyverse)
install.packages("devtools")
install.packages("devtools")
library(devtools)
data_package <- list.files("C:\Users\vicen\Dropbox\Proyecto de libro\paquete_r\politicalds",
full.names = T)
data_package <- list.files("C:/Users/vicen/Dropbox/Proyecto de libro/paquete_r/politicalds",
full.names = T)
View(data_package)
lapply(list.files("bases_ingles_final/", full.names = T), load, .GlobalEnv)
lapply(list.files("C:/Users/vicen/Dropbox/Proyecto de libro/paquete_r/bases_ingles_final/",
full.names = T), load, .GlobalEnv)
list_data <- mget(ls())
save(x, file = glue("data/{name_x}.rda"),
compress = "bzip2", version = 2)
save(x, file = glue("data/{name_x}.rda"),
compress = "bzip2", version = 2)
walk2(list_data, names(list_data), f_save_data_package)
data_frames <- Filter(function(x){is.data.frame(get(x))}, ls())
save(list = d, file = glue("data/{d}.rda"),
compress = "bzip2", version = 2)
?walk2
View(stm_model_k10)
dir.create("data")
f_save_data_package <- function(x, name_x){
save(x, file = glue("data/{name_x}.rda"),
compress = "bzip2", version = 2)
}
walk2(list_data, names(list_data), f_save_data_package)
??walk2
library(tidyverse)
list_data <- mget(ls())
walk2(list_data, names(list_data), f_save_data_package)
??glue
library(glue)
walk2(list_data, names(list_data), f_save_data_package)
data_frames <- Filter(function(x){is.data.frame(get(x))}, ls())
for(d in data_frames) {
save(list = d, file = glue("data/{d}.rda"),
compress = "bzip2", version = 2)
}
lapply(list.files("bases_ingles_final/", full.names = T), load, .GlobalEnv)
lapply(list.files("bases_ingles_final/", full.names = T), load, .GlobalEnv)
lapply(list.files("C:/Users/vicen/Dropbox/Proyecto de libro/paquete_r/bases_ingles_final",
full.names = T), load, .GlobalEnv)
list_data <- mget(ls())
View(list_data)
dir.create("data")
save(x, file = glue("data/{name_x}.rda"),
compress = "bzip2", version = 2)
dir.create("data")
f_save_data_package <- function(x, name_x){
save(x, file = glue("data/{name_x}.rda"),
compress = "bzip2", version = 2)
}
walk2(list_data, names(list_data), f_save_data_package)
data_frames <- Filter(function(x){is.data.frame(get(x))}, ls())
for(d in data_frames) {
save(list = d, file = glue("data/{d}.rda"),
compress = "bzip2", version = 2)
}
walk2(list_data, names(list_data), ~ {
})
devtools::document()
devtools::document()
